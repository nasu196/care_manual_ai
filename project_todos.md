# プロジェクトToDoリスト

## 1. 全体管理・設計
| タスク名                                                     | 担当者 | 期限 | 進捗状況 | 備考                                   |
| :----------------------------------------------------------- | :----- | :--- | :------- | :------------------------------------- |
| UI/UXの具体的な画面イメージと主要な操作フローの詳細設計        | USER/AI |      | 完了     | 主要なUI/UXは実装済みのため完了とする。    |
| 介護専門用語辞書の作成とシステムへの統合方法検討             |        |      | 対象外   | 今回の開発スコープからは除外。             |
| データ削除ポリシーの明確化と利用規約への反映                 |        |      | 未着手   | tool_concept.md 3章より                |
| プロジェクト管理・コミュニケーションツールの選定と導入         | USER/AI |      | 完了     | GitHubをプロジェクト管理・コミュニケーションツールとして使用。 |
| CI/CDパイプラインの構築検討（将来的）                        |        |      | 未着手   | tool_concept.md 6章より                |

## 2. UI/UX開発 (従業員向け)
| タスク名                                       | 担当者    | 期限 | 進捗状況 | 備考                                                       |
| :--------------------------------------------- | :-------- | :--- | :------- | :--------------------------------------------------------- |
| 共有デバイス向けシンプルUIデザイン             | USER/AI   |      | 未着手   | PC、タブレット対応。AIチャットボットとメモ閲覧が主機能 |
| No.8 AIチャットボットインターフェース実装        | AI/USER   |      | 完了(v2.1) | 基本的なQ&A表示、Markdownレンダリング対応。チャットエリアのスクロール制御改善、AI回答の詳細度設定機能(UI)追加、吹き出し幅調整、NotebookLM風ヘッダー追加に伴うレイアウト調整。**選択ソースによるチャット参照範囲の制御機能を追加。** **AIの回答をメモ管理機能に連携する機能を追加（Zustandによる状態管理経由）。** |
| 管理者作成メモ閲覧機能実装                     |           |      | 未着手   |                                                            |
| 重要情報ワンタップアクセス機能UIデザインと実装 |        |      | 未着手   |                                                            |

## 3. UI/UX開発 (管理者向け)
| タスク名                                                     | 担当者 | 期限 | 進捗状況 | 備考                                     |
| :----------------------------------------------------------- | :----- | :--- | :------- | :--------------------------------------- |
| 管理者向けインターフェースデザイン                           | AI/USER |      | 完了     | 基本的な3カラムレイアウト（`AppLayout.tsx`）およびNotebookLM風ヘッダー（`TopHeader.tsx`）の実装完了。チャットUIのスクロール制御、AI回答詳細度設定UI、メッセージ吹き出し幅調整など、関連するUI調整も含む。 |
| マニュアル管理機能（アップロード、一覧、最新版表示）実装     | AI/USER |      | 進行中   | `SourceManager.tsx` にて基本的なファイル操作UI（アップロード、一覧、削除、名前変更 ※ファイル名はASCIIのみ、**ソース選択状態の永続化**）を実装。日本語ファイル名対応、最新版管理ロジックは未実装。PDF対応。**チャット時の参照ソース選択機能と連携。** |
| 管理者作成メモ作成・編集・管理機能実装                       | AI/USER |      | 完了 (v1) | リッチテキストエディタ（Tiptap）導入、新規メモ作成UIフロー（NotebookLM風表示切替）、エディタ内の箇条書き（ul, ol）・見出し（h1-h3）スタイル調整完了。CRUD操作（作成、閲覧、更新、削除）のフロントエンドおよびSupabase Edge Functions連携完了。**重要フラグ機能の追加（DB、API、UI連携完了）。** |
| AIへの指示インターフェース実装（練習問題生成など）           |        |      | 完了   |  練習問題・クイズ生成機能（AI指示）実装の方で進捗を管理するため、こちらは完了とする                                        |
| 設定画面実装（必要最低限）                                   |        |      | 未着手   |                                          |

## 4. 情報検索・提示機能開発
| タスク名                                               | 担当者 | 期限 | 進捗状況 | 備考                                       |
| :----------------------------------------------------- | :----- | :--- | :------- | :----------------------------------------- |
| AIチャットボットバックエンド実装（自然言語処理）       | AI/USER |      | 完了   | Google Gemini API, LangChain を使用し、マニュアルに基づく基本的な回答生成ロジックは実装済み。 |
| マニュアルに基づく回答生成ロジック実装                 | AI/USER |      | 完了     | AIチャットボットバックエンド実装に統合。 |
| 参照ソース明示機能実装                                 | AI/USER |      | 進行中   | 回答とマニュアルの該当箇所を紐付け。現在チューニング中。         |
| 介護特化チューニング（専門用語辞書組込）               |        |      | 対象外   | 今回の開発スコープからは除外。                           |
| 回答品質と速度の継続的な監視・調整                     | AI/USER | -    | 進行中   | Langsmith等を用いた評価とパラメータ最適化。現在、回答精度と参照ソースのチューニングを実施中。 |

## 5. 文書管理・コンテンツ活用機能開発
| タスク名                                                                 | 担当者 | 期限 | 進捗状況 | 備考                                                       |
| :----------------------------------------------------------------------- | :----- | :--- | :------- | :--------------------------------------------------------- |
| 【初期】開発者によるマニュアルのSupabase Storageへの配置とベクトル化処理 |        |      | 完了     | 手動にて r6_koubover2_sogyo1.pdf を manuals バケットに配置 |
| マニュアルアップロード機能（PDF, Word, PowerPoint, Excel）                 | AI/USER |      | 完了     | `SourceManager.tsx` にて主要なファイル形式（PDF, Word, PowerPoint, Excel）のアップロードUIとSupabase Storage連携、テキスト抽出処理（`process-manual.js`の改修）を実装完了（ファイル名はASCIIのみ）。最新版管理ロジックは今回のスコープ外。 |
| マニュアル一元管理システム（最新版主義）                                 |        |      | 対象外   | Supabase Database (ユーザー側でバージョン管理を行うため、開発スコープから除外) |
| 管理者主導型メモ機能バックエンド実装                                 | AI/USER |      | 完了     | Supabase Database, Edge Functions (CRUD API実装済み)         |
| 研修資料作成支援機能（AI指示によるプロンプト生成）実装                 |        |      | 未着手   | 結果を「管理者作成メモ」に保存                           |
| 練習問題・クイズ生成機能（AI指示）実装                               |        |      | 未着手   | 結果を「管理者作成メモ」に保存、採点手動                     |
| OCRなしPDFへの対応検討                                               |        |      | 未着手   | サーバーサイドでのOCR処理導入、またはユーザーへのガイドライン提示などを検討。 |
| AIによる次アクション提案機能（レコメンド機能）                       | AI/USER |      | 進行中   | **仕様詳細:** <br>- 更新トリガー: 「アイディアを更新」ボタン押下時のみ。 <br>- 初回表示: 「『アイディアを更新』ボタンを押して、最初の提案を取得しましょう」等の案内。 <br>- 更新中表示: ローディングスピナー等の表示。 <br>- 生成不可時: 「適切な提案が見つかりませんでした」等のメッセージ。 <br>- 最大表示数: 10件（5行2列イメージ）。 <br>- キャッシュ: localStorage等に保存しリロード後も保持。有効期限なし。 <br>- エラー処理: APIエラー時に適切なメッセージ表示。 <br>- 対象ソース: 初期は全ソース、将来的にはユーザー選択ソース。 |

## 6. アクセス管理機能開発
| タスク名                                                     | 担当者 | 期限 | 進捗状況 | 備考                                 |
| :----------------------------------------------------------- | :----- | :--- | :------- | :----------------------------------- |
| ユーザー認証システム実装 (Clerk)                             |        |      | 未着手   | 管理者向けログイン (注: 初期調査含め後続フェーズで対応) |
| ログイン不要オプション検討・実装（従業員向け）               |        |      | 未着手   | セキュリティ対策（IP制限など）を併用 |

## 7. 多言語対応機能開発
| タスク名                         | 担当者 | 期限 | 進捗状況 | 備考          |
| :------------------------------- | :----- | :--- | :------- | :------------ |
| AIチャットボットの多言語応答対応 |        |      | 未着手   | Google Gemini |

## 8. バックエンド / データベース開発 (Supabase)
| タスク名                                                         | 担当者 | 期限 | 進捗状況 | 備考                                                           |
| :--------------------------------------------------------------- | :----- | :--- | :------- | :------------------------------------------------------------- |
| Supabaseプロジェクトセットアップ                                 |        |      | 完了     | Database, Storage, Edge Functions                              |
| データベーススキーマ設計（マニュアル、メモ、設定など）             |        |      | 完了     | `manuals`, `manual_chunks`, `memos`, `settings` テーブル作成 |
| ベクトル検索のためのpgvector拡張機能導入と設定                     |        |      | 完了     | `vector` 拡張機能有効化                                    |
| 各機能向けAPIエンドポイント作成 (Supabase Edge Functions or other) | AI/USER |      | 完了     | 主要機能向けのEdge Functions (メモCRUD、マニュアル処理、Q&A等) は実装・動作確認済み。update-memo Functionのメソッド不一致およびID取得方法の問題を解決し、正常動作を確認。ローカルテスト時、PowerShellのInvoke-WebRequestで日本語JSONを送信する場合は、-Bodyに渡すデータを `[System.Text.Encoding]::UTF8.GetBytes()` でバイト配列化し、-ContentType `'application/json;charset=utf-8'` を指定すること。`process-manual-function` のクラウド環境での動作確認完了。 |

## 9. AI関連技術準備
| タスク名                                                       | 担当者 | 期限 | 進捗状況 | 備考            |
| :------------------------------------------------------------- | :----- | :--- | :------- | :-------------- |
| Google Gemini API利用準備（アカウント、キー取得など）            |        |      | 完了     | APIキーを.envに格納、テストコール成功 |
| LangChain学習とプロジェクトへの導入準備                        |        |      | 完了     | 基本的なQ&AのPoC成功 (ローカルテキスト) |
| 介護専門用語辞書データ作成                                     |        |      | 対象外   | 今回の開発スコープからは除外。 |

## 10. インフラ・デプロイメント
| タスク名                                 | 担当者 | 期限 | 進捗状況 | 備考        |
| :--------------------------------------- | :----- | :--- | :------- | :---------- |
| Vercelプロジェクトセットアップ           |        |      | 未着手   | Next.js連携 (注: ローンチ時またはデプロイ確認時に対応) |
| Gitリポジトリ作成 (GitHub)               |        |      | 完了   |             |
| フロントエンドデプロイ設定 (Vercel)      |        |      | 未着手   |             |
| バックエンドデプロイ設定 (Supabase依存)  | AI/USER |      | 完了     | Supabaseの各種設定、Edge Functionsのデプロイ含む。 |

- [x] No.40 Supabase Storageに検証用PDFを手動アップロード (例: r6_koubover2_sogyo1.pdf) (担当: USER, 状態: 完了)
- [x] No.41 `process-manual.js` の動作確認とDB保存処理のテスト (担当: AI, USER, 状態: 完了)
- [x] No.42 類似度検索APIエンドポイントの実装 (pgvector利用) (担当: AI, 状態: 完了)
- [x] No.43 LLM連携による回答生成処理 (プロンプトエンジニアリング含む、会話履歴記憶機能追加) (担当: AI, 状態: 完了, 詳細: 2段階LLM導入、プロンプト改善、パラメータ調整により回答品質と構造が大幅向上。詳細は別途報告書参照。)
- [x] No.44 Q&A APIエンドポイントの実装 (No.42, 43の統合) (担当: AI, 状態: 完了, 詳細: RAGシステムのコア機能として実装完了。継続的な品質・速度改善を実施。詳細は別途報告書参照。)
- [ ] No.68 各機能向けAPIエンドポイント作成 (Supabase Edge Functions or other) (担当: AI, 状態: 進行中)
- [x] No.XX チャット時の参照ソースをファイル単位で制御する機能の実装 (フロントエンド、API、DB連携) (担当: AI/USER, 状態: 完了) 